{"version":3,"sources":["/Users/paulsealock/vagrant-local/www/tangaroa/public_html/wp-content/plugins/woocommerce-admin/packages/dependency-extraction-webpack-plugin/src/index.js"],"names":["WPDependencyExtractionWebpackPlugin","require","packages","WOOCOMMERCE_NAMESPACE","camelCaseDash","string","replace","_","letter","toUpperCase","wooRequestToExternal","request","includes","handle","substring","length","irregularExternalMap","settings","wooRequestToHandle","irregularHandleMap","data","DependencyExtractionWebpackPlugin","_context","callback","externalRequest","options","requestToExternal","useDefaults","externalizedDeps","add","requestToHandle","scriptDependency","module","exports"],"mappings":"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","sourcesContent":["const WPDependencyExtractionWebpackPlugin = require( '@wordpress/dependency-extraction-webpack-plugin' );\nconst packages = require( '../assets/packages' );\n\nconst WOOCOMMERCE_NAMESPACE = '@woocommerce/';\n\n/**\n * Given a string, returns a new string with dash separators converted to\n * camelCase equivalent. This is not as aggressive as `_.camelCase` in\n * converting to uppercase, where Lodash will also capitalize letters\n * following numbers.\n *\n * @param {string} string Input dash-delimited string.\n *\n * @return {string} Camel-cased string.\n */\nfunction camelCaseDash( string ) {\n\treturn string.replace( /-([a-z])/g, ( _, letter ) => letter.toUpperCase() );\n}\n\nconst wooRequestToExternal = ( request ) => {\n\tif ( packages.includes( request ) ) {\n\t\tconst handle = request.substring( WOOCOMMERCE_NAMESPACE.length );\n\t\tconst irregularExternalMap = {\n\t\t\t'blocks-registry': [ 'wc', 'wcBlocksRegistry' ],\n\t\t\tsettings: [ 'wc', 'wcSettings' ],\n\t\t};\n\n\t\tif ( irregularExternalMap[ handle ] ) {\n\t\t\treturn irregularExternalMap[ handle ];\n\t\t}\n\n\t\treturn [ 'wc', camelCaseDash( handle ) ];\n\t}\n};\n\nconst wooRequestToHandle = ( request ) => {\n\tif ( packages.includes( request ) ) {\n\t\tconst handle = request.substring( WOOCOMMERCE_NAMESPACE.length );\n\t\tconst irregularHandleMap = {\n\t\t\tdata: 'wc-store-data',\n\t\t\t'csv-export': 'wc-csv',\n\t\t};\n\n\t\tif ( irregularHandleMap[ handle ] ) {\n\t\t\treturn irregularHandleMap[ handle ];\n\t\t}\n\n\t\treturn 'wc-' + handle;\n\t}\n};\n\nclass DependencyExtractionWebpackPlugin extends WPDependencyExtractionWebpackPlugin {\n\texternalizeWpDeps( _context, request, callback ) {\n\t\tlet externalRequest;\n\n\t\t// Handle via options.requestToExternal first\n\t\tif ( typeof this.options.requestToExternal === 'function' ) {\n\t\t\texternalRequest = this.options.requestToExternal( request );\n\t\t}\n\n\t\t// Cascade to default if unhandled and enabled\n\t\tif (\n\t\t\ttypeof externalRequest === 'undefined' &&\n\t\t\tthis.options.useDefaults\n\t\t) {\n\t\t\texternalRequest = wooRequestToExternal( request );\n\t\t}\n\n\t\tif ( externalRequest ) {\n\t\t\tthis.externalizedDeps.add( request );\n\n\t\t\treturn callback( null, externalRequest );\n\t\t}\n\n\t\t// Fall back to the WP method\n\t\treturn super.externalizeWpDeps( _context, request, callback );\n\t}\n\n\tmapRequestToDependency( request ) {\n\t\t// Handle via options.requestToHandle first\n\t\tif ( typeof this.options.requestToHandle === 'function' ) {\n\t\t\tconst scriptDependency = this.options.requestToHandle( request );\n\t\t\tif ( scriptDependency ) {\n\t\t\t\treturn scriptDependency;\n\t\t\t}\n\t\t}\n\n\t\t// Cascade to default if enabled\n\t\tif ( this.options.useDefaults ) {\n\t\t\tconst scriptDependency = wooRequestToHandle( request );\n\t\t\tif ( scriptDependency ) {\n\t\t\t\treturn scriptDependency;\n\t\t\t}\n\t\t}\n\n\t\t// Fall back to the WP method\n\t\treturn super.mapRequestToDependency( request );\n\t}\n}\n\nmodule.exports = DependencyExtractionWebpackPlugin;\n"]}